import{r as n,j as e,a as N,A as g,o as v,p as U}from"./index-Cxe98Gdg.js";import{N as d}from"./Toasts-BB3bV-Hz.js";import{L as y}from"./Loading-Cr0u_j9A.js";const i=n.forwardRef(({children:s},a)=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:s}),e.jsx("input",{ref:a,className:"w-full text-black tracking-wider font-bold  text-xl border-l-4 border-r-4 border-t-2 border-b-2 border-black rounded-lg focus:outline-none px-4 h-12",type:"text",id:"name"})]}));i.displayName="UpdatePassword";const k=({usernameRef:s})=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:"Username"}),e.jsx("input",{ref:s,className:"w-full text-black tracking-wider font-bold  text-xl border-l-4 border-r-4 border-t-2 border-b-2 border-black rounded-lg focus:outline-none px-4 h-12",type:"text",id:"name"})]}),I=({setFile:s})=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:"Select Image"}),e.jsx("input",{type:"file",onChange:a=>{s(a.target.files[0])}})]}),R=({user:s,setActive:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-2xl text-center pt-4",children:["Hello! ",s.username]}),e.jsxs("div",{className:"grid gap-5 px-10 py-4  w-full  mx-auto mt-5 ",children:[e.jsx(c,{heading:"Username",setActive:a}),e.jsx(c,{heading:"Password",setActive:a}),e.jsx(c,{heading:"ProfileImg",setActive:a})]})]}),c=({heading:s,setActive:a})=>e.jsxs("div",{className:"flex  justify-between items-center",children:[e.jsx("h2",{className:"text-xl tracking-wide text-white font-bold",children:s}),e.jsx("button",{onClick:()=>a(s),className:"btn btn-xs btn-accent bg-violet-400 hover:bg-violet-500 ",children:"update"})]}),H=({user:s})=>{const a=N(),[t,r]=n.useState(""),[l,o]=n.useState(!1),[h,w]=n.useState(null),m=n.useRef(null),x=n.useRef(null),u=n.useRef(null),j=async P=>{var f;if(P.preventDefault(),o(!0),t==="ProfileImg")await F(h,o,a);else{let b={username:(f=m.current)==null?void 0:f.value},p="/profile/update";t==="Password"&&(b={oldPassword:x.current.value,newPassword:u.current.value},p="/password/update"),await C(t,b,p,o,a)}};return e.jsxs("div",{className:"setting  bg-[#f57156] max-w-[500px] mx-auto mt-16 sm:mt-8 border-t-8 border-b-8  rounded-3xl border-black shadow-lg shadow-black sm:pb-8 pb-16",children:[e.jsx(R,{user:s,setActive:r}),t&&e.jsxs("div",{className:"forms",children:[e.jsx("p",{className:"text-center font-bold tracking-wide mb-4  text-2xl",children:t}),e.jsxs("form",{onSubmit:j,className:"form1  border-t-4 border-b-4 shadow-lg shadow-black rounded-3xl border-black bg-[#f46748] max-w-96 mx-auto px-5 py-5",children:[t==="Username"&&e.jsx(k,{usernameRef:m}),t==="ProfileImg"&&e.jsx(I,{setFile:w}),t==="Password"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{ref:x,children:"Old Password"}),e.jsx(i,{ref:u,children:"New Password"})]}),l?e.jsx("div",{className:"flex justify-center h-16",children:e.jsx(y,{})}):e.jsx("button",{className:"btn block btn-accent btn-sm bg-violet-400 hover:bg-violet-500   mx-auto mt-5",children:"Update"})]})]})]})},F=async(s,a,t)=>{if(!s)return d("warning","please select a image"),a(!1);const r=new FormData;r.append("image",s);const l=await g.uploadImage("/image",r);l.success?(d("success",l.message),t(v())):d("error",l.message),a(!1)},C=async(s,a,t,r,l)=>{const o=await g.updateProfile(t,a);if(o.success){if(r(!1),s==="Password")return d("success","Password updated successfully");d("success","Username updated successfully"),l(U(o.data))}else d("error",o.message),r(!1)};export{H as default};
