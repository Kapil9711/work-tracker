import{r as l,j as e,a as g,A as p,b as I,s as D,d as u,u as S,f as R,e as y}from"./index-Dw1Oylpw.js";import{d as f}from"./styled-components.browser.esm-j7zM8z_M.js";import{ThemeContext as P}from"./DashboardPage-fej48c_B.js";import{M as $}from"./Modal-DqyH7rnM.js";import{L as F,N as i}from"./Toasts-MV5hbaTx.js";/* empty css                      */const L=f.button`
  background-color: ${({theme:s,active:t,compare:a})=>t===a?s["primary-600"]:s["primary-300"]};
  color: ${({theme:s,active:t,compare:a})=>t===a?s.white:s.gray};
  &:hover,
  &:focus,
  &:active {
    background-color: ${({theme:s})=>s["primary-600"]};
    color: ${({theme:s})=>s.white};
  }
`,d=({children:s,active:t,setActive:a})=>{const{theme:r}=l.useContext(P);return e.jsx(L,{onClick:()=>a(s),compare:s,active:t,theme:r,className:"rounded-full py-[10px] px-[24px] font-bold tracking-wide text-center",children:s})},b=l.forwardRef(({children:s},t)=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:s}),e.jsx("input",{ref:t,className:"w-full text-black tracking-wider font-bold  text-xl border-l-4 border-r-4 border-t-2 border-b-2 border-black rounded-lg focus:outline-none px-4 h-12",type:"text",id:"name"})]}));b.displayName="UpdatePassword";const M=({usernameRef:s})=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:"Username"}),e.jsx("input",{ref:s,className:"w-full text-black tracking-wider font-bold  text-xl border-l-4 border-r-4 border-t-2 border-b-2 border-black rounded-lg focus:outline-none px-4 h-12",type:"text",id:"name"})]}),B=({setFile:s})=>e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("label",{className:"text-2xl",htmlFor:"name",children:"Select Image"}),e.jsx("input",{type:"file",onChange:t=>{s(t.target.files[0])}})]}),T=({user:s,setActive:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-2xl text-center pt-4",children:["Hello! ",s.username]}),e.jsxs("div",{className:"grid gap-5 px-10 py-4  w-full  mx-auto mt-5 ",children:[e.jsx(h,{heading:"Username",setActive:t}),e.jsx(h,{heading:"Password",setActive:t}),e.jsx(h,{heading:"ProfileImg",setActive:t})]})]}),h=({heading:s,setActive:t})=>e.jsxs("div",{className:"flex  justify-between items-center",children:[e.jsx("h2",{className:"text-xl tracking-wide text-white font-bold",children:s}),e.jsx("button",{onClick:()=>t(s),className:"btn btn-xs btn-accent bg-violet-400 hover:bg-violet-500 ",children:"update"})]}),O=({user:s})=>{const t=g(),[a,r]=l.useState(""),[n,c]=l.useState(!1),[x,m]=l.useState(null),o=l.useRef(null),j=l.useRef(null),w=l.useRef(null),U=async C=>{var N;if(C.preventDefault(),c(!0),a==="ProfileImg")await z(x,c,t);else{let v={username:(N=o.current)==null?void 0:N.value},k="/profile/update";a==="Password"&&(v={oldPassword:j.current.value,newPassword:w.current.value},k="/password/update"),await A(a,v,k,c,t)}};return e.jsxs("div",{className:"setting  bg-[#f57156] max-w-[500px] mx-auto mt-16 sm:mt-8 border-t-8 border-b-8  rounded-3xl border-black shadow-lg shadow-black sm:pb-8 pb-16",children:[e.jsx(T,{user:s,setActive:r}),a&&e.jsxs("div",{className:"forms",children:[e.jsx("p",{className:"text-center font-bold tracking-wide mb-4  text-2xl",children:a}),e.jsxs("form",{onSubmit:U,className:"form1  border-t-4 border-b-4 shadow-lg shadow-black rounded-3xl border-black bg-[#f46748] max-w-96 mx-auto px-5 py-5",children:[a==="Username"&&e.jsx(M,{usernameRef:o}),a==="ProfileImg"&&e.jsx(B,{setFile:m}),a==="Password"&&e.jsxs(e.Fragment,{children:[e.jsx(b,{ref:j,children:"Old Password"}),e.jsx(b,{ref:w,children:"New Password"})]}),n?e.jsx("div",{className:"flex justify-center h-16",children:e.jsx(F,{})}):e.jsx("button",{className:"btn block btn-accent btn-sm bg-violet-400 hover:bg-violet-500   mx-auto mt-5",children:"Update"})]})]})]})},z=async(s,t,a)=>{if(!s)return i("warning","please select a image"),t(!1);const r=new FormData;r.append("image",s);const n=await p.uploadImage("/image",r);n.success?(i("success",n.message),a(I())):i("error",n.message),t(!1)},A=async(s,t,a,r,n)=>{const c=await p.updateProfile(a,t);if(c.success){if(r(!1),s==="Password")return i("success","Password updated successfully");i("success","Username updated successfully"),n(D(c.data))}else i("error",c.message),r(!1)},E=()=>{const s=u(o=>o.user.value),t=u(o=>o.user.image),a=u(o=>o.user.key),r=g(),[n,c]=l.useState(!1),x=S();l.useEffect(()=>{r(R())},[]);const m=async()=>{const o=await p.logoutUser();o.success?(i("success","Logout successfull"),x("/")):i("error",o.message)};return e.jsxs("div",{className:"dropdown dropdown-hover ",children:[e.jsxs("div",{tabIndex:0,role:"button",className:"btn btn-ghost  text-white text-xl m-1",children:[e.jsx("img",{className:"rounded-full w-11 h-11",src:t,alt:"starImg"},a),e.jsx("span",{className:"hidden sm:block",children:s.username})]}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content bg-white -ml-36 sm:ml-0 menu  rounded-box z-[1] w-52 p-2 shadow",children:[e.jsx("li",{className:"btn btn-ghost text-xl hover:bg-gray-200",onClick:()=>c(!0),children:"Profile"}),e.jsx("li",{className:"btn btn-ghost text-sm flex gap-2 hover:bg-gray-200",onClick:m,children:"Log Out"}),n&&e.jsx($,{setIsOpen:c,children:e.jsx(O,{user:s})})]})]})},H=f.nav`
  width: min(100%, 1600px);
  margin-inline: auto;
`,W=f.button`
  background-color: ${({theme:s})=>s.light?s["primary-600"]:s.gray};
  color: ${({theme:s})=>s.light?s["primary-100"]:"black"};
  border-radius: 50px;
  padding-inline: 20px;
  padding-block: 8px;
  &:hover {
    background-color: ${({theme:s})=>s.light?"#591403":s.white};
    color: ${({theme:s})=>s.light?s["primary-100"]:"black"};
  }
  &:focus {
    border: none;
    outline: none;
  }
`,Y=()=>{const{setActiveTheme:s,theme:t}=l.useContext(P),a=g(),[r,n]=l.useState("Daily");return e.jsxs(H,{className:"navbar  bg-transparent",children:[e.jsxs("div",{className:"navbar-start",children:[e.jsxs("div",{className:"dropdown",children:[e.jsx("div",{tabIndex:0,role:"button",className:"btn btn-ghost lg:hidden",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h8m-8 6h16"})})}),e.jsxs("ul",{tabIndex:0,className:"menu menu-sm dropdown-content gap-y-1  bg-base-100 rounded-box z-[1] mt-3  p-2 shadow",children:[e.jsx("li",{children:e.jsx(d,{className:"btn btn-ghost text-xl",children:"Daily"})}),e.jsx("li",{children:e.jsx(d,{className:"btn btn-ghost text-xl",children:"Month"})})]})]}),e.jsx("a",{style:{color:t.light?t["primary-600"]:t["primary-500"]},className:"btn btn-ghost text-2xl -ml-6 sm:ml:0   md:text-4xl font-bold italic tracking-wide",children:"Listify"})]}),e.jsx("div",{className:"navbar-center hidden lg:flex",children:e.jsxs("ul",{className:"menu menu-horizontal px-1 gap-5  ",children:[e.jsx("li",{onClick:()=>a(y(!1)),children:e.jsx(d,{active:r,setActive:n,className:"btn btn-ghost text-xl",children:"Daily"})}),e.jsx("li",{onClick:()=>a(y(!0)),children:e.jsx(d,{active:r,setActive:n,className:"btn btn-ghost text-xl",children:"Monthly"})})]})}),e.jsxs("div",{className:"navbar-end flex sm:gap-8",children:[e.jsx(W,{theme:t,onClick:()=>G(s),children:t.light?"dark":"light"}),e.jsx("a",{className:"flex  items-center",children:e.jsx(E,{})})]})]})},G=s=>{s(t=>(localStorage.setItem("theme",t==="light"?"dark":"light"),t==="light"?"dark":"light"))};export{Y as default};
